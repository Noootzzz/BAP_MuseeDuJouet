<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Choix de la couleur de voiture</title>
    <script
      src="https://kit.fontawesome.com/ec35368b02.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com/" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Paytone+One&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
  </head>
  <body class="relative bg-gradient-to-b from-blue-200 to-blue-50 h-screen">
    <a href="index.html">
      <i
        class="fa-solid fa-house text-5xl m-5 mb-0 text-blue-800 absolute top-5 left-5"
      ></i>
    </a>
    <main class="flex flex-col items-center h-5/6 pt-[3rem]">
      <div
        id="img-container"
        class="w-[36rem] h-[24rem] relative mt-10 overflow-hidden"
      ></div>
      <p
        class="bg-gradient-to-b from-blue-400 to-blue-800 text-transparent bg-clip-text font-bold text-xl"
      >
        Ecrit ton prénom pour récupérer ta voiture
      </p>
      <form action="./qr.html" method="get" class="flex flex-col items-center">
        <input
          id="couleurVoiture_input"
          name="couleurVoiture"
          type="hidden"
          value="0"
        />
        <input id="annee_input" name="annee" type="hidden" value="0" />
        <input id="volant_input" name="volant" type="hidden" value="01" />
        <input id="motif_input" name="motif" type="hidden" value="undefined" />
        <input id="jante_input" name="jante" type="hidden" value="01" />
        <input
          id="couleurAileron_input"
          name="couleurAileron"
          type="hidden"
          value="0"
        />
        <input
          id="aileron_input"
          name="aileron"
          type="hidden"
          value="undefined"
        />
        <input id="bg_input" name="bg" type="hidden" value="01" />
        <input id="step" name="step" type="hidden" value="0" />
        <input type="text" id="name_input" name="name" class="mt-5" required />
        <input
          type="submit"
          class="text-white bg-gradient-to-b from-blue-500 to-blue-800 rounded-xl p-2 mt-5"
          value="Continuer"
        />
      </form>
    </main>
    <footer class="h-1/6 flex justify-end flex-wrap items-center">
      <button
        onclick="history.back(); return false;"
        class="text-white bg-gradient-to-b from-blue-500 to-blue-800 rounded-xl p-2 px-8 mx-8"
      >
        Retour
      </button>
    </footer>
  </body>

  <script>
    const url = new URLSearchParams(window.location.search);
    let couleur_tab = ["Bleue", "Jaune", "Rose", "Rouge", "Vert"];
    const couleur_voiture = url.get("couleurVoiture");
    const annee = url.get("annee");
    const volant = url.get("volant") ? url.get("volant") : "01";
    const motif = url.get("motif");
    const jante = url.get("jante") ? url.get("jante") : "01";
    const couleurAileron = url.get("couleurAileron");
    const aileron = url.get("aileron");
    const bg = url.get("bg");

    let step = url.get("step");
    let step_prev = 0;
    if (step !== undefined && step !== null) {
      step_prev = Number(step);
      step = Number(step) + 1;
      document.getElementById("step").value = step;
    }
    if (couleur_voiture) {
      document.getElementById("couleurVoiture_input").value = couleur_voiture;
    }

    if (annee) {
      document.getElementById("annee_input").value = annee;
    }
    if (volant) {
      document.getElementById("volant_input").value = volant;
    }
    if (motif) {
      document.getElementById("motif_input").value = motif;
    }
    if (jante) {
      document.getElementById("jante_input").value = jante;
    }
    if (couleurAileron) {
      document.getElementById("couleurAileron_input").value = couleurAileron;
    }
    if (aileron) {
      document.getElementById("aileron_input").value = aileron;
    }
    if (bg) {
      document.getElementById("bg_input").value = bg;
    }

    document.getElementById("img-container").innerHTML = `
    <img
      src="./src/img/Fond/Fond-${bg}.png"
      alt="Image de fond"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Pneu/${annee}-Pneus-Gauche.png"
      alt="Pneu Gauche"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Base_Back/${annee}-Base-Siège-${couleur_tab[couleur_voiture]}.png"
      alt="Base back"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Volant/${annee}-Volant-${volant}-Blanc.png"
      alt="Volant"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Aileron_Back/${annee}-Aileron-Back-${aileron}-${couleur_tab[couleurAileron]}.png"
      alt="Aileron_Back"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Aileron_Front/${annee}-Aileron-Front-${aileron}-${couleur_tab[couleurAileron]}.png"
      alt="Aileron_Front"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Base_Front/${annee}-Base-${couleur_tab[couleur_voiture]}.png"
      alt="Base Front"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Motif/${annee}-Motif-${motif}.png"
      alt="Motif"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Pneu/${annee}-Pneus-Droit.png"
      alt="Pneu droit"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />
    <img
      src="./src/img/${annee}/Jantes/${annee}-Jantes-${jante}.png"
      alt="Jante"
      class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
    />`;
  </script>
</html>
